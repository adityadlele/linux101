
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LAMMPS Tutorial 1 &#8212; Practical Molecular simulations</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script >const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Molecular dynamics basics" href="md_basics.html" />
    <link rel="prev" title="Geometry Generation" href="geo.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Practical Molecular simulations</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Practical Molecular Simulations
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="prereq.html">
   Prerequisites
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="access.html">
     How to get access to Princeton compueter clusters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="terminal.html">
     How to use the computing cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tools.html">
     Simulation Tools
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="geo.html">
     Geometry Generation
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     LAMMPS Tutorial 1
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="md_basics.html">
   Molecular dynamics basics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture1.html">
     Lecture 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture2.html">
     Lecture 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture3.html">
     Lecture 3
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture4.html">
     Lecture 4
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="LAMMPS.html">
   LAMMPS
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture5.html">
     Lecture 5
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture6.html">
     Lecture 6
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Advanced_techniques.html">
   Advanced techniques
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture7.html">
     Lecture 7
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture8.html">
     Lecture 8
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="DFT.html">
   DFT
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture9.html">
     Lecture 9
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lecture10.html">
     Lecture 10
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Exercises.html">
   Exercises
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="ex0.html">
     Exercise 0
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ex1.html">
     Exercise 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ex2.html">
     Exercise 2
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/lammps.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#typical-input-files-required-the-names-can-be-changed">
   Typical input files required (The names can be changed)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lammps-installation">
   LAMMPS installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lammps-energy-minimization">
   LAMMPS energy minimization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lammps-diffusion-example">
   LAMMPS diffusion example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ovito">
   OVITO
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>LAMMPS Tutorial 1</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#typical-input-files-required-the-names-can-be-changed">
   Typical input files required (The names can be changed)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lammps-installation">
   LAMMPS installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lammps-energy-minimization">
   LAMMPS energy minimization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lammps-diffusion-example">
   LAMMPS diffusion example
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ovito">
   OVITO
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <div class="section" id="lammps-tutorial-1">
<h1>LAMMPS Tutorial 1<a class="headerlink" href="#lammps-tutorial-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="typical-input-files-required-the-names-can-be-changed">
<h2>Typical input files required (The names can be changed)<a class="headerlink" href="#typical-input-files-required-the-names-can-be-changed" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>in.lammps: Input file. This file has all the parameters controlling the simulations (e.g. Thermostat, Barostate, Ensemble)</p></li>
<li><p>geom.xyz: (optional) Geometry file. This file describes the coordinates of your simulation system. Alternatively, you can also define your system geometry in the input file.</p></li>
<li><p>potential file: (optional) A file defining the MD potential that you are using.</p></li>
</ul>
</div>
<div class="section" id="lammps-installation">
<h2>LAMMPS installation<a class="headerlink" href="#lammps-installation" title="Permalink to this headline">¶</a></h2>
<p>Create a folder named software in your adroit home directory (/home/Your_princeton_ID).</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /home/Your_princeton_ID
mkdir software
</pre></div>
</div>
<p>Change the directory to the software folder</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ./software
</pre></div>
</div>
<p>This is the lammps installation script. Copy the contents of the following code block to the
software folder with a file names ‘<a class="reference external" href="http://install.sh">install.sh</a>’. (Alternatively I have uploaded this file on
Canvas in the folder LAMMPS tutorial1).</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># double-precision build for single- and multi-node CPU jobs</span>

<span class="nv">VERSION</span><span class="o">=</span>31Aug2021
wget https://github.com/lammps/lammps/archive/refs/tags/patch_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>.tar.gz
tar zvxf patch_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>.tar.gz
<span class="nb">cd</span> lammps-patch_<span class="si">${</span><span class="nv">VERSION</span><span class="si">}</span>
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd</span> build

<span class="c1"># include the modules below in your Slurm scipt</span>
module purge
module load intel/19.1.1.217 intel-mpi/intel/2019.7

cmake3 <span class="se">\</span>
-D <span class="nv">CMAKE_INSTALL_PREFIX</span><span class="o">=</span><span class="nv">$HOME</span>/.local <span class="se">\</span>
-D <span class="nv">LAMMPS_MACHINE</span><span class="o">=</span>adroit <span class="se">\</span>
-D <span class="nv">CMAKE_BUILD_TYPE</span><span class="o">=</span>Release <span class="se">\</span>
-D <span class="nv">CMAKE_CXX_COMPILER</span><span class="o">=</span>icpc <span class="se">\</span>
-D <span class="nv">CMAKE_CXX_FLAGS_RELEASE</span><span class="o">=</span><span class="s2">&quot;-Ofast -xHost -DNDEBUG&quot;</span> <span class="se">\</span>
-D <span class="nv">CMAKE_Fortran_COMPILER</span><span class="o">=</span>/opt/intel/compilers_and_libraries_2020.1.217/linux/bin/intel64/ifort <span class="se">\</span>
-D <span class="nv">BUILD_OMP</span><span class="o">=</span>yes <span class="se">\</span>
-D <span class="nv">BUILD_MPI</span><span class="o">=</span>yes <span class="se">\</span>
-D <span class="nv">PKG_KSPACE</span><span class="o">=</span>yes -D <span class="nv">FFT</span><span class="o">=</span>MKL -D <span class="nv">FFT_SINGLE</span><span class="o">=</span>no <span class="se">\</span>
-D <span class="nv">PKG_OPENMP</span><span class="o">=</span>yes <span class="se">\</span>
-D <span class="nv">PKG_MOLECULE</span><span class="o">=</span>yes <span class="se">\</span>
-D <span class="nv">PKG_RIGID</span><span class="o">=</span>yes <span class="se">\</span>
-D <span class="nv">PKG_REAXFF</span><span class="o">=</span>yes<span class="se">\</span>
-D <span class="nv">ENABLE_TESTING</span><span class="o">=</span>yes ../cmake

make -j <span class="m">10</span>
<span class="c1">#make test</span>
make install
</pre></div>
</div>
<p>Make the script executable by using the following command</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>chmod +x ./install.sh
</pre></div>
</div>
<p>Then run the installations using the following command. Make sure you open the visualization node
on Adroit dashboard as that has internet access required for installation.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./install.sh
</pre></div>
</div>
<p>Use the following job submission script to submit a LAMMPS job. Copy the following content to a file named
‘job.slurm’ on your scratch folder (/scratch/network/al9001/). Make sure you replace my princeton Id with yours.</p>
<p>Alternatively the script is also available on Canvas.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=lj-melt       # create a short name for your job</span>
<span class="c1">#SBATCH --nodes=1                # node count</span>
<span class="c1">#SBATCH --ntasks=4               # total number of tasks across all nodes</span>
<span class="c1">#SBATCH --cpus-per-task=1        # cpu-cores per task (&gt;1 if multi-threaded tasks)</span>
<span class="c1">#SBATCH --mem-per-cpu=1G         # memory per cpu-core (4G is default)</span>
<span class="c1">#SBATCH --time=00:05:00          # total run time limit (HH:MM:SS)</span>
<span class="c1">#SBATCH --mail-type=begin        # send email when job begins</span>
<span class="c1">#SBATCH --mail-type=end          # send email when job ends</span>
<span class="c1">#SBATCH --mail-user=&lt;YourNetID&gt;@princeton.edu</span>

module purge
module load intel/19.1.1.217 intel-mpi/intel/2019.7
<span class="nb">export</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span>

srun /home/al9001/.local/bin/lmp_adroit -in <span class="k">in</span>.lammps
</pre></div>
</div>
<p>Then create an input file in the same location with the name in.lammps. The input file can be copied from below or dowloaded from Canvas.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>units           real
atom_style      atomic


read_data       ar.data

velocity        all create <span class="m">1</span>.0 <span class="m">87287</span>

pair_style      lj/cut <span class="m">2</span>.5
pair_coeff      <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>.0 <span class="m">1</span>.0 <span class="m">2</span>.5

neighbor        <span class="m">0</span>.3 bin
neigh_modify    every <span class="m">20</span> delay <span class="m">0</span> check no

fix             <span class="m">1</span> all npt temp <span class="m">95</span>.0 <span class="m">95</span>.0 <span class="m">100</span>.0 iso <span class="m">1</span>.0 <span class="m">1</span>.0 <span class="m">1000</span>.0




timestep        <span class="m">0</span>.25

thermo          <span class="m">100</span>
thermo_style    custom step pe ke etotal temp press vol density
thermo_modify   format float %15.14g

dump             <span class="m">1</span> all custom <span class="m">500</span> dump.ar id <span class="nb">type</span> x y z


run             <span class="m">500000</span>
</pre></div>
</div>
<p>Now, you should have 3 different files in your scratch folder.1)in.lammps 2)ar.data 3)job.slurm</p>
<p>Submit your lammps job using the following command</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sbatch job.slurm
</pre></div>
</div>
<p>You can check your job status by using following command</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>squeue -u Your_Princeton_ID
</pre></div>
</div>
<p>Your job should finish in a few minutes. Once it finishes, you should be able to see a file named log.lammps. I have also
uploaded a sample output on Canvas.</p>
<p>Now you can use the gnuplot tool to plot the results</p>
<p>To start gnuplot type</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gnuplot
</pre></div>
</div>
<p>This will take you to an interactive GNUPLOT session. Type the following command to plot density as a function of time.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>plot <span class="s2">&quot;log.lammps&quot;</span> using <span class="m">1</span>:8
</pre></div>
</div>
<p>To take an average average of the density use following set of command line by line</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>f<span class="o">(</span>x<span class="o">)</span> <span class="o">=</span> m * x + q 
fit <span class="o">[</span><span class="m">100000</span>:500000<span class="o">][</span><span class="m">0</span>:0.01<span class="o">]</span> f<span class="o">(</span>x<span class="o">)</span> <span class="s1">&#39;log.lammps&#39;</span> using <span class="m">1</span>:8 via m, q
plot <span class="o">[</span><span class="m">100000</span>:500000<span class="o">][</span><span class="m">0</span>:0.01<span class="o">]</span> <span class="s2">&quot;log.lammps&quot;</span> using <span class="m">1</span>:8, f<span class="o">(</span>x<span class="o">)</span>
</pre></div>
</div>
<p>You should be able to see an output similar to the one that we saw in the class.</p>
<p>To exit the GNUPLOT environment:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">exit</span>
</pre></div>
</div>
</div>
<div class="section" id="lammps-energy-minimization">
<h2>LAMMPS energy minimization<a class="headerlink" href="#lammps-energy-minimization" title="Permalink to this headline">¶</a></h2>
<p>We will use ReaxFF example files to run an energy minimization simulation. Copy the ReaxFF CHO exmaple folder</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cp -r <span class="se">\l</span>ocation_of_lammps_installation<span class="se">\e</span>xamples<span class="se">\r</span>eaxff<span class="se">\C</span>HO <span class="se">\s</span>cratch<span class="se">\n</span>etwork<span class="se">\&lt;</span>your_net_ID&gt;<span class="se">\m</span>in
</pre></div>
</div>
<p>Now we will make some changes to the input file to run energy minimization. You can copy the following to your input file</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>units           real

atom_style      charge
read_data      CH4.lammps-data
<span class="c1">#read_data       mix.data</span>

pair_style      reax/c lmp_control
pair_coeff      * * ffield.reax.cho C H

neighbor        <span class="m">2</span> bin
neigh_modify    every <span class="m">10</span> delay <span class="m">0</span> check no

<span class="c1">#fix            1 all nve</span>
<span class="c1">#fix             1 all nvt temp 500.0 500.0 100.0</span>
fix             <span class="m">2</span> all qeq/reax <span class="m">1</span> <span class="m">0</span>.0 <span class="m">10</span>.0 1e-6 param.qeq
<span class="c1">#fix             3 all temp/berendsen 500.0 500.0 100.0</span>

<span class="c1">#timestep       0.25</span>
<span class="c1">#run             10000</span>

<span class="c1">#dump           1 all atom 1 dump.reax.cho</span>
dump             <span class="m">1</span> all custom <span class="m">1</span> dump.cho id element x y z
dump_modify     <span class="m">1</span> element C H
minimize        <span class="m">1</span>.0e-5 <span class="m">1</span>.0e-6 <span class="m">100</span> <span class="m">100000</span>
min_style       cg
<span class="c1">#run            3000</span>
</pre></div>
</div>
<p>Also, generate a data file with following coordinates.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># LAMMPS data file written by OVITO Basic 3.5.4</span>
<span class="m">5</span> atoms
<span class="m">2</span> atom types
-0.5676 <span class="m">6</span>.63 xlo xhi
-0.7276 <span class="m">6</span>.63 ylo yhi
-0.7276 <span class="m">6</span>.63 zlo zhi

Masses

<span class="m">1</span> <span class="m">12</span>.0107  <span class="c1"># C</span>
<span class="m">2</span> <span class="m">1</span>.00794  <span class="c1"># H</span>

Atoms  <span class="c1"># charge</span>

<span class="m">1</span> <span class="m">1</span> <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
<span class="m">2</span> <span class="m">2</span> <span class="m">0</span>.0 <span class="m">0</span>.63 <span class="m">0</span>.63 <span class="m">0</span>.63
<span class="m">3</span> <span class="m">2</span> <span class="m">0</span>.0 <span class="m">0</span>.5276 -0.6276 -0.7276
<span class="m">4</span> <span class="m">2</span> <span class="m">0</span>.0 -0.4276 <span class="m">0</span>.4276 -0.5276
<span class="m">5</span> <span class="m">2</span> <span class="m">0</span>.0 -0.5676 -0.7276 <span class="m">0</span>.6276
</pre></div>
</div>
<p>Copy and edit the job submission script to submit the job.</p>
</div>
<div class="section" id="lammps-diffusion-example">
<h2>LAMMPS diffusion example<a class="headerlink" href="#lammps-diffusion-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=diff       # create a short name for your job</span>
<span class="c1">#SBATCH --nodes=1                # node count</span>
<span class="c1">#SBATCH --ntasks=4               # total number of tasks across all nodes</span>
<span class="c1">#SBATCH --cpus-per-task=1        # cpu-cores per task (&gt;1 if multi-threaded tasks)</span>
<span class="c1">#SBATCH --mem-per-cpu=1G         # memory per cpu-core (4G is default)</span>
<span class="c1">#SBATCH --time=00:15:00          # total run time limit (HH:MM:SS)</span>
<span class="c1">#SBATCH --mail-type=begin        # send email when job begins</span>
<span class="c1">#SBATCH --mail-type=end          # send email when job ends</span>
<span class="c1">#SBATCH --mail-user=al9001@princeton.edu</span>

module purge
module load intel/19.1.1.217
module load intel-mpi/intel/2019.7
<span class="nb">export</span> <span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span>
<span class="c1">###Create directories</span>
mkdir <span class="o">{</span><span class="m">2000</span>..10000..2000<span class="o">}</span>

<span class="c1">###Copy files into the directories</span>

<span class="c1">#for d in ./*/; do cp limn2o4.vac.data limn2o4.msd.in &quot;$d&quot;; done</span>


<span class="k">for</span> d <span class="k">in</span> */ <span class="p">;</span> <span class="k">do</span>
    <span class="nv">d2</span><span class="o">=</span><span class="si">${</span><span class="nv">d</span><span class="p">:</span><span class="k">:-</span><span class="nv">1</span><span class="si">}</span>
<span class="c1">#    echo &quot;$d&quot; &amp;&gt; ./&quot;$d&quot;/test.txt</span>
     <span class="nb">echo</span> <span class="s2">&quot;units           metal</span>

<span class="s2">dimension       3</span>
<span class="s2">boundary        p p p</span>
<span class="s2">atom_style      atomic</span>
<span class="s2">neighbor        2.5 bin</span>
<span class="s2">neigh_modify    every 1</span>


<span class="s2">read_data       limn2o4.vac.data</span>
<span class="s2">pair_style      lj/cut 16.5</span>
<span class="s2">pair_coeff      1 1 0.249 3.57 16.5</span>
<span class="s2">pair_coeff      1 2 0.292 3.25 16.5</span>
<span class="s2">pair_coeff      1 3 0.195 1.77 16.5</span>
<span class="s2">pair_coeff      2 2 0.204 2.91 16.5</span>
<span class="s2">pair_coeff      2 3 0.226 2.06 12.0</span>
<span class="s2">pair_coeff      3 3 0.204 2.91 12.0</span>

<span class="s2">timestep        0.0005</span>
<span class="s2">fix             1 all nvt temp &quot;</span><span class="nv">$d2</span><span class="s2">&quot; &quot;</span><span class="nv">$d2</span><span class="s2">&quot; 0.05</span>
<span class="s2">velocity        all create 10000 9865758 dist uniform</span>

<span class="s2">dump            1 all xyz 1000 limn2o4.xyz</span>
<span class="s2">dump_modify     1 element Li Mn O</span>

<span class="s2">group           lithiums type 1</span>
<span class="s2">group           manganeses type 2</span>
<span class="s2">group           oxygens type 2</span>
<span class="s2">compute         mymsdli lithiums msd com yes </span>
<span class="s2">compute         mymsdmn manganeses msd com yes </span>
<span class="s2">compute         mymsdo oxygens msd com yes </span>

<span class="s2">thermo          1000</span>
<span class="s2">thermo_style    custom step time temp c_mymsdli[4] c_mymsdmn[4] c_mymsdo[4]</span>

<span class="s2">run             100000&quot;</span> <span class="p">&amp;</span>&gt; ./<span class="s2">&quot;</span><span class="nv">$d</span><span class="s2">&quot;</span>/limn2o4.msd.in

   <span class="nb">echo</span> <span class="s2">&quot;Structure of LiMn2O4</span>
<span class="s2"> </span>
<span class="s2">      52    atoms</span>
<span class="s2"> </span>
<span class="s2">         3    atom types</span>
<span class="s2"> </span>
<span class="s2">       0.000000      8.2500000 xlo xhi</span>
<span class="s2">       0.000000      8.2500000 ylo yhi</span>
<span class="s2">       0.000000      8.2500000 zlo zhi</span>
<span class="s2"> </span>
<span class="s2">              Masses</span>
<span class="s2"> </span>
<span class="s2">         1            6.941</span>
<span class="s2">         2           54.938</span>
<span class="s2">         3           15.999</span>
<span class="s2">               Atoms</span>

<span class="s2"> 1 1 4.11085 4.10814 0.00177939         </span>
<span class="s2"> 2 1 8.23585 4.10814 4.12677</span>
<span class="s2"> 3 1 4.11085 8.23315 4.12677</span>
<span class="s2"> 4 1 6.17335 2.04564 6.18928</span>
<span class="s2"> 5 2 1.0171 1.0144 5.15803</span>
<span class="s2"> 6 2 5.14211 5.13939 5.15802</span>
<span class="s2"> 7 2 7.2046 3.07689 1.03302</span>
<span class="s2"> 8 2 3.0796 5.1394 3.09552</span>
<span class="s2"> 9 2 3.07961 1.01439 7.22052</span>
<span class="s2">10 2 5.14211 7.20189 7.22052</span>
<span class="s2">11 2 1.0171 7.2019 3.09552</span>
<span class="s2">12 2 5.1421 1.01438 1.03302</span>
<span class="s2">13 2 3.0796 3.0769 5.15802</span>
<span class="s2">14 2 7.2046 5.13938 7.22052</span>
<span class="s2">15 2 1.0171 5.13939 1.03302</span>
<span class="s2">16 2 5.14209 3.07689 3.09552</span>
<span class="s2">17 2 7.20461 7.20189 5.15802</span>
<span class="s2">18 2 3.0796 7.20189 1.03302</span>
<span class="s2">19 2 1.01711 3.0769 7.22052</span>
<span class="s2">20 2 7.2046 1.01439 3.09553</span>
<span class="s2">21 3 1.02723 1.02452 3.08539</span>
<span class="s2">22 3 7.19448 3.06676 7.2104</span>
<span class="s2">23 3 3.06948 5.14952 5.16815</span>
<span class="s2">24 3 5.15223 7.19176 1.04315</span>
<span class="s2">25 3 3.06948 1.02452 1.04315</span>
<span class="s2">26 3 7.19447 7.19176 3.0854</span>
<span class="s2">27 3 5.15224 3.06676 5.16815</span>
<span class="s2">28 3 1.02724 5.14952 7.21039</span>
<span class="s2">29 3 1.02723 3.06676 1.04315</span>
<span class="s2">30 3 3.06948 7.19176 7.2104</span>
<span class="s2">31 3 3.06947 3.06676 3.08539</span>
<span class="s2">32 3 5.15223 5.14952 3.08539</span>
<span class="s2">33 3 7.19448 1.02452 5.16816</span>
<span class="s2">34 3 7.21473 3.08702 3.10565</span>
<span class="s2">35 3 7.21473 7.21201 7.23065</span>
<span class="s2">36 3 1.00698 1.00426 7.23065</span>
<span class="s2">37 3 3.08973 5.12926 1.0229</span>
<span class="s2">38 3 5.13198 7.21202 5.1479</span>
<span class="s2">39 3 7.21473 5.12926 5.14789</span>
<span class="s2">40 3 5.13197 1.00427 3.10565</span>
<span class="s2">41 3 1.00697 7.21202 1.0229</span>
<span class="s2">42 3 3.08974 3.08702 7.23065</span>
<span class="s2">43 3 1.00698 3.08702 5.1479</span>
<span class="s2">44 3 5.13198 5.12926 7.23065</span>
<span class="s2">45 3 3.08973 7.21202 3.10565</span>
<span class="s2">46 3 7.21473 1.00426 1.0229</span>
<span class="s2">47 3 5.13197 3.08701 1.0229</span>
<span class="s2">48 3 1.00697 5.12927 3.10565</span>
<span class="s2">49 3 3.08973 1.00427 5.1479</span>
<span class="s2">50 3 7.19447 5.14952 1.04315</span>
<span class="s2">51 3 5.15224 1.02451 7.2104</span>
<span class="s2">52 3 1.02724 7.19177 5.16815       &quot;</span> <span class="p">&amp;</span>&gt; ./<span class="s2">&quot;</span><span class="nv">$d</span><span class="s2">&quot;</span>/limn2o4.vac.data

   <span class="nb">cd</span> <span class="s2">&quot;</span><span class="nv">$d</span><span class="s2">&quot;</span>
   srun ~/.local/bin/lmp_adroit -in limn2o4.msd.in
   <span class="nb">cd</span> ../
<span class="k">done</span>
</pre></div>
</div>
<p>Copy the following content to a file named <a class="reference external" href="http://run.sh">run.sh</a>.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="k">for</span> d <span class="k">in</span> */ <span class="p">;</span> <span class="k">do</span>
   <span class="nb">cd</span> <span class="s2">&quot;</span><span class="nv">$d</span><span class="s2">&quot;</span>
   /usr/bin/gnuplot -e <span class="s1">&#39;set term png&#39;</span> -e <span class="s2">&quot;plot &#39;log.lammps&#39; u 1:4 with lines&quot;</span> &gt; ./out.png
   <span class="nb">cd</span> ../
<span class="k">done</span>
</pre></div>
</div>
<p>Make the <a class="reference external" href="http://run.sh">run.sh</a> file executable by using following command</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>chmod +x run.sh
</pre></div>
</div>
<p>Then run it after the job is run.</p>
</div>
<div class="section" id="ovito">
<h2>OVITO<a class="headerlink" href="#ovito" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://www.ovito.org/">OVITO</a> is an easy to use visualization software that can also be used to convert different geometry file formats.
You can download and install the free version locally on your computer for visualization. You can download the <a class="reference external" href="http://dump.ar">dump.ar</a> file from your
simulation folder to your computer and open it using OVITO.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="geo.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Geometry Generation</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="md_basics.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Molecular dynamics basics</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Aditya Lele<br/>
  
      &copy; Copyright 2020.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>